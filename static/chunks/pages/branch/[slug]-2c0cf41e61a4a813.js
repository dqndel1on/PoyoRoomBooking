(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[171],{6831:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/branch/[slug]",function(){return n(3790)}])},3790:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return N}});var r=n(5893),s=n(9008),a=n(1163),c=n(7294),i=n(8520),u=n.n(i),l=n(6076),o=n(715),m=n(8193),d=n(9583),h=n(9649),x=n(1554),f=n(9086);function p(e,t,n,r,s,a,c){try{var i=e[a](c),u=i.value}catch(l){return void n(l)}i.done?t(u):Promise.resolve(u).then(r,s)}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,s=!1,a=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(u){s=!0,a=u}finally{try{r||null==i.return||i.return()}finally{if(s)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var v=function(e){var t,n=e.roomNumber,s=e.branchId,a=e.branchName,i=b(c.useState(""),2),v=i[0],N=i[1],j=b(c.useState(1),2),w=j[0],y=j[1],g=b(c.useState(),2),k=g[0],_=g[1],S=(0,h.Z)(),B=S.checkIn,E=S.contractAddress,C=S.checkOut,I=(0,f.K)().accounts,q=(t=u().mark((function e(){var t,r,s,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"===typeof window.ethereum){e.next=14;break}return t=new o.Q(window.ethereum),r=t.getSigner(),s=new l.CH(E,x.Mt,r),e.prev=4,e.next=7,s.getRoomStatus(a,n);case 7:c=e.sent,_(c),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[4,11]])})),function(){var e=this,n=arguments;return new Promise((function(r,s){var a=t.apply(e,n);function c(e){p(a,r,s,c,i,"next",e)}function i(e){p(a,r,s,c,i,"throw",e)}c(void 0)}))});return c.useEffect((function(){q()}),[]),(0,r.jsxs)("div",{className:"w-96 h-auto mt-10 text-pink-600 border hover:shadow-2xl transition-all duration-300 ease-in",children:[(0,r.jsx)("img",{src:"/room.jpg",alt:"room.jpg"}),(0,r.jsxs)("div",{className:"p-3",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsxs)("div",{className:"text-2xl flex items-center mt-2",children:[(0,r.jsx)(m.iBz,{className:"w-6 h-6 mr-2"})," ",n]}),(0,r.jsxs)("div",{className:"text-2xl flex items-center mt-2",children:[(0,r.jsx)(d.f0S,{className:"w-6 h-6 mr-2"})," 2"]})]}),(0,r.jsxs)("form",{onSubmit:function(e){e.preventDefault(),B({_account:I,_roomNumber:n,_branchId:s,_branchName:a,_time:w,_usedBy:v})},children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mt-5",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{children:"Name"}),(0,r.jsx)("input",{value:v,onChange:function(e){return N(e.target.value)},required:!0,placeholder:"Name",className:"border mr-1 max-w-xs w-full text-black p-2"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{children:"Days of Stay"}),(0,r.jsx)("input",{value:w,onChange:function(e){return y(Number(e.target.value))},required:!0,type:"number",placeholder:"Days of Stay",className:"border ml-1 max-w-xs w-full text-black p-2"})]})]}),(null===k||void 0===k?void 0:k.isOccupied)?(0,r.jsxs)("div",{className:"flex items-center justify-between mt-5 uppercase",children:[(0,r.jsx)("button",{onClick:function(){C({_branchName:a,_branchId:s,_roomNumber:n})},className:"bg-pink-600 px-3 py-2 rounded-md text-white",children:"Check Out"}),(0,r.jsxs)("h1",{children:["Used By: ",k[3]]})]}):(0,r.jsx)("input",{type:"submit",value:"Book Room",className:"bg-pink-600 px-3 py-2 mt-5 rounded-md text-white"})]})]})]})},N=function(){var e=(0,a.useRouter)(),t=(0,h.Z)(),n=t.getBranchDetails,i=t.branchDetails;return c.useEffect((function(){e.query.slug&&n(Number(e.query.slug))}),[e.query.slug]),(0,r.jsxs)("div",{children:[(0,r.jsx)(s.default,{children:(0,r.jsxs)("title",{children:[e.query.slug," | Poyo Room Booking"]})}),(0,r.jsxs)("section",{className:"container mx-auto p-20",children:[(0,r.jsxs)("div",{className:"text-pink-600",children:[(0,r.jsxs)("h1",{className:"font-black text-4xl",children:["Branch: ",i[0]]}),(0,r.jsxs)("h2",{className:"mt-2 text-xl",children:["Branch ID: ",Number(i[2])]}),(0,r.jsx)("p",{className:"bg-black px-3 py-2 text-white",children:"The rooms are located in parallel universe, that's why all the rooms look similar. Trust me bruh..!!"})]}),(0,r.jsx)("div",{className:"flex justify-between flex-wrap items-center",children:i[1]&&Array.apply(null,Array(Number(i[1]))).map((function(e,t){return(0,r.jsx)(v,{branchName:i[0],branchId:Number(i[2]),roomNumber:t+1},t)}))})]})]})}},9008:function(e,t,n){e.exports=n(5443)},1163:function(e,t,n){e.exports=n(387)}},function(e){e.O(0,[445,617,774,888,179],(function(){return t=6831,e(e.s=t);var t}));var t=e.O();_N_E=t}]);